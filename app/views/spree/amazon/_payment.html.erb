<%# %>
<%# Amazon Payments - Login and Pay for Spree Commerce %>
<%# %>
<%# @category    Amazon %>
<%# @package     Amazon_Payments %>
<%# @copyright   Copyright (c) 2014 Amazon.com %>
<%# @license     http://opensource.org/licenses/Apache-2.0  Apache License, Version 2.0 %>
<%# %>
new OffAmazonPayments.Widgets.Wallet({
  <%# TODO: How do we determine the correct gateway here? %>
  sellerId: '<%= SpreeAmazon::Config[:merchant_id] %>',
  onPaymentSelect: function(orderReference) {
    jQuery.post(
      '/amazon_order/payment',
      {"order_reference": order_reference},
      function() {
        $('#continue_to_delivery').click();
      }
    );
  },
  design: {
    designMode: 'responsive'
  },
  onError: function(error) {
    // your error handling code
  }
}).bind("walletWidgetDiv");
